// Here you will write *javascript* that would be executed by the browser
<% if @item.errors.any? %>
  // Render new review form with errors
  $('#new_item').html("<%= j render 'items/form', business_place: @business_place, item: @item %>");
<% else %>

  $(function () {
     // Disable modal - Do not work on IOS Safari
     $('#add-dish-modal').modal('hide');

     // Disable Modal - IOS Safari - DON'T WORK YET!!!!
     $('body').removeClass('modal-open');
     $('.modal-backdrop').remove();
  });



  function sleep (time) {
    return new Promise((resolve) => setTimeout(resolve, time));
  }

  // Capture what the html will need to display for the new item and hide it
  var new_item = $("<%= j render '/business_places/item_show', item: @item %>").hide();

  // Sleep for a momento to wait the modal animation, then append in
  // the items list and make it appear with a slidedown
  sleep(500).then(() => {
      // Do something after the sleep!
      $('.js-items-list').append(new_item);
      new_item.slideDown("slow");
  });
<% end %>
