<!-- Modal Sign Up -->
  <div class="modal fade" id="add-dish-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <!-- <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel">New Today's Dish for <%= @business_place.name %></h4>
        </div> -->
        <div class="modal-body">
            <h4>Select a Previous Dish</h4>
            <div class="row-fluid">
              <div class="col-lg-12 col-md-10 ">
                  <div class="cover-container">
                      <!-- START PANEL -->
                      <% @items.each do |i| %>
                        <%= link_to copy_item_path(i), method: "post", remote: true do %>
                          <div class="cover-item" style="background-image: url('<%= i.photo.url %>')"></div>
                        <% end %>
                      <% end %>
                      <!-- END PANEL -->
                  </div>
              </div>
            </div>
            <div>or</div>
            <h4>Create Today's Dish</h4>

            <%= simple_form_for [@business_place, @item] do |f| %>
            <%= f.input :name, label: false, placeholder: "Dish's name" %>
            <%= f.input :description, label: false, placeholder: "Description" %>
            <%# f.input :ready_at, default: Time.now + 1.hour %>
            <%# f.input :available_qty %>
            <%= f.input :price, label: false, placeholder: "Price" %>
            <%# f.input :currency, collection: ["USD", "EUR"], prompt: "Select the currency", selected: "EUR" %>
            <%# f.input :start_datetime, default: Date.today + 1.minute %>
            <%# f.input :end_datetime, default: Date.today + 1 - 1.minute %>
            <%= f.input :photo %>
            <%= f.input :photo_cache, as: :hidden %>
            <%# f.association :ingredients, as: :check_boxes, label: "Which ingredients does it have?" %>
            <%= f.button :submit, class: "btn btn-primary btn-block" %>
            <% end %>

        </div>
      </div>
    </div>
  </div>

<!-- <div class="banner-small" style="background-image: url('<%# @business_place.cover_photo.url %>');"> -->
<div class="banner-small" style="background-image: linear-gradient(0deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.1) 55%), url('<%= image_url @business_place.cover_photo.url %>');">
  <div class="banner-small-content">
      <h2><%= @business_place.name %></h2>
      <h3><%= @business_place.description %></h3>
      <p><%= @business_place.phone_number %>   |   <%= @business_place.full_address %></p>
      <%= link_to "Edit Business Place", edit_business_place_path, class: "btn-medium btn-medium-white", id: "edit-button" %>
      <!--  why does this work without an ID?-->
  </div>
</div>

<div class="badge-yellow">
  <%= link_to "Get me there", "#directions" %>
  <!-- map_business_place_path(@business_place) -->
</div>

<% unless @items.empty? %>

<div class="wrapper-white text-center">
  <h2>Today's dishes</h2>
</div>

<div class="wrapper-lightgrey">
  <div class="container">
   <% @items.each do |item| %>
   <div class="row">
      <div class="col-sm-6">
        <div class="dish-show-container">
            <%= image_tag  item.photo.url, class: "img-responsive img-rounded dish-image"%>
            <!-- <div class="dish-info">
              <div class="dish-info-text wrapper-transp-grey">
                <div class="dish-info-text-name">Spring salad with potatoes</div>
                <div class="dish-info-text-price">Price: 8€</div>
              </div>
            </div> -->
            <!-- <a class="dish-link" href="#" ></a> -->
        </div>
      </div>
      <div class="col-sm-6">
        <div class="dish-show-container">
          <div class="dish-name"><%= item.name %></div>
          <div class="dish-price">Price: <%= item.price.round %>€</div>
          <div class="dish-description"><%= item.description %></div>
        </div>
      </div>
    </div>
    <% end %>
  </div>
</div>
<% end %>

<% if user_signed_in? && current_user.business_places.include?(@business_place) %>
<div class="wrapper-white text-center">
  <h2>Today's dishes</h2>
</div>

<div class="wrapper-lightgrey">
  <div class="container">
    <div class="row">
      <div class="col-sm-8 col-sm-offset-2">
        <div class="dish-show-container">
          <%= link_to "#", class: "dish-add dish-add-pin", data: { toggle: "modal", target: "#add-dish-modal"} do %>
            <i></i>
            <span>Create a Dish</span>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- <br>
  <br>
  <div class="container text-center">
  <%= link_to "Add New Today's Dish", new_business_place_item_path(@business_place), class: "btn btn-default "%>
  </div> -->
<% end %>

 <!--
Spring salad with potatoes
Price: 8€
Mix leaves, cooked eggs, grilled chicken, parmesan cheese, artichokes, potatoes and olive oil-based sauce.
 -->

<div class="container text-center">
  <div class="wrapper-white">
    <div id="directions">
    <form action="http://maps.google.com/maps" method="get" target="_blank">
      <input type="text" name="saddr" placeholder="Starting address" />
      <input type="hidden" name="daddr" value="<%= @business_place.full_address %>"/>
      <input type="submit" value="get directions" class= "btn btn-primary"/>
    </form>
    </div>
  </div>
</div>

  <div id="map" style="width: 100%; height: 400px;"></div>

  <%= content_for(:after_js) do %>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyANIX5OkPPRTJZkKRUF80Nso8xQvwEY2mE">
    console.log('google_api')
  </script>


  <script type="text/javascript">
    var myLatlng = new google.maps.LatLng(<%= @business_place.latitude %> , <%= @business_place.longitude %>);

    var myOptions = {
      zoom: 16,
      center: myLatlng,
      scrollwheel: false,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
  styles: [{"featureType":"administrative","elementType":"labels.text.fill","stylers":[{"color":"#444444"}]},{"featureType":"landscape","elementType":"all","stylers":[{"color":"#f2f2f2"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"all","stylers":[{"saturation":-100},{"lightness":45}]},{"featureType":"road.highway","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"transit","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"transit.station.bus","elementType":"geometry","stylers":[{"visibility":"on"},{"hue":"#ff0000"}]},{"featureType":"transit.station.bus","elementType":"geometry.fill","stylers":[{"visibility":"on"}]},{"featureType":"transit.station.bus","elementType":"labels.text","stylers":[{"visibility":"on"}]},{"featureType":"water","elementType":"all","stylers":[{"color":"#4690ec"},{"visibility":"on"}]},{"featureType":"water","elementType":"geometry","stylers":[{"visibility":"on"}]}] // TODO: replace [] by array from https://snazzymaps.com/
};

var map = new google.maps.Map(document.getElementById('map'), myOptions);
var marker = new google.maps.Marker({
  position: myLatlng,
  map: map,
  title: "You are here!"
});
</script>
<% end %>



